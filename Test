local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local SoundService = game:GetService("SoundService")
local player = Players.LocalPlayer
local PlayerGui = player:WaitForChild("PlayerGui")

-- Create GUI
local gui = Instance.new("ScreenGui")
gui.IgnoreGuiInset = true
gui.ResetOnSpawn = false
gui.Name = "LoadingScreen"
gui.Parent = PlayerGui

-- Main frame
local loadingFrame = Instance.new("Frame")
loadingFrame.Size = UDim2.new(0.5, 0, 0.4, 0)
loadingFrame.Position = UDim2.new(0.25, 0, 0.3, 0)
loadingFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
loadingFrame.BorderSizePixel = 0
loadingFrame.Parent = gui
Instance.new("UICorner", loadingFrame).CornerRadius = UDim.new(0.05, 0)

-- Title (small GUI)
local titleTop = Instance.new("TextLabel", loadingFrame)
titleTop.Size = UDim2.new(1, 0, 0.2, 0)
titleTop.Position = UDim2.new(0, 0, 0.08, 0)
titleTop.BackgroundTransparency = 1
titleTop.Text = "STEAL A BRANROT"
titleTop.TextColor3 = Color3.fromRGB(255, 255, 255)
titleTop.TextScaled = true
titleTop.Font = Enum.Font.Cartoon
titleTop.TextStrokeTransparency = 0.4
titleTop.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)

local titleBottom = Instance.new("TextLabel", loadingFrame)
titleBottom.Size = UDim2.new(1, 0, 0.2, 0)
titleBottom.Position = UDim2.new(0, 0, 0.23, 0)
titleBottom.BackgroundTransparency = 1
titleBottom.Text = "v.1.1.1"
titleBottom.TextColor3 = Color3.fromRGB(255, 255, 255)
titleBottom.TextScaled = true
titleBottom.Font = Enum.Font.Cartoon
titleBottom.TextStrokeTransparency = 0.4
titleBottom.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)

-- Title for expanded GUI
local bigTopLabel = Instance.new("TextLabel", loadingFrame)
bigTopLabel.Size = UDim2.new(1, 0, 0.1, 0)
bigTopLabel.Position = UDim2.new(0, 0, 0.02, 0)
bigTopLabel.BackgroundTransparency = 1
bigTopLabel.Text = "ðŸ§  STEAL A BRAINROT SCRIPT v1.1.1"
bigTopLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
bigTopLabel.TextSize = 36
bigTopLabel.Font = Enum.Font.Cartoon
bigTopLabel.TextStrokeTransparency = 0.4
bigTopLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
bigTopLabel.Visible = false

-- Extra info label
local extraInfoLabel = Instance.new("TextLabel", loadingFrame)
extraInfoLabel.Size = UDim2.new(1, 0, 0.08, 0)
extraInfoLabel.Position = UDim2.new(0, 0, 0.12, 0)
extraInfoLabel.BackgroundTransparency = 1
extraInfoLabel.Text = "don't worry, ur base is locked"
extraInfoLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
extraInfoLabel.TextSize = 24
extraInfoLabel.Font = Enum.Font.Cartoon
extraInfoLabel.TextStrokeTransparency = 0.5
extraInfoLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
extraInfoLabel.Visible = false

-- Status label
local statusLabel = Instance.new("TextLabel", loadingFrame)
statusLabel.Size = UDim2.new(1, 0, 0.2, 0)
statusLabel.Position = UDim2.new(0, 0, 0.5, 0)
statusLabel.BackgroundTransparency = 1
statusLabel.Text = "Starting..."
statusLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
statusLabel.TextScaled = true
statusLabel.Font = Enum.Font.Cartoon
statusLabel.TextStrokeTransparency = 0.4
statusLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)

-- Progress bar background
local barBackground = Instance.new("Frame", loadingFrame)
barBackground.Size = UDim2.new(0.9, 0, 0.12, 0)
barBackground.Position = UDim2.new(0.05, 0, 0.7, 0)
barBackground.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
barBackground.BorderSizePixel = 0
Instance.new("UICorner", barBackground).CornerRadius = UDim.new(0.3, 0)

-- Progress bar fill
local progressBar = Instance.new("Frame", barBackground)
progressBar.Size = UDim2.new(0, 0, 1, 0)
progressBar.BackgroundColor3 = Color3.fromRGB(85, 170, 255)
progressBar.BorderSizePixel = 0
Instance.new("UICorner", progressBar).CornerRadius = UDim.new(0.3, 0)

-- Progress % text
local percentLabel = Instance.new("TextLabel", barBackground)
percentLabel.Size = UDim2.new(1, 0, 1, 0)
percentLabel.BackgroundTransparency = 1
percentLabel.Text = "0.0%"
percentLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
percentLabel.Font = Enum.Font.Cartoon
percentLabel.TextScaled = true
percentLabel.TextStrokeTransparency = 0.4
percentLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)

-- Expand GUI
local expanded = false
local function expandGui()
	if expanded then return end
	expanded = true

	TweenService:Create(loadingFrame, TweenInfo.new(1), {
		Size = UDim2.new(1, 0, 1, 0),
		Position = UDim2.new(0, 0, 0, 0)
	}):Play()

	TweenService:Create(titleTop, TweenInfo.new(0.5), {
		TextTransparency = 1,
		TextStrokeTransparency = 1
	}):Play()
	TweenService:Create(titleBottom, TweenInfo.new(0.5), {
		TextTransparency = 1,
		TextStrokeTransparency = 1
	}):Play()

	task.delay(1, function()
		bigTopLabel.Visible = true
		extraInfoLabel.Visible = true
	end)

	-- Run sound cleanup in parallel
	task.spawn(function()
		for _, sound in pairs(workspace:GetDescendants()) do
			if sound:IsA("Sound") then
				sound:Stop()
				sound:Destroy()
			end
		end
		SoundService.Volume = 0
	end)
end

-- Start loading
task.spawn(function()
	local totalTime = 180 -- 3 minutes
	local currentTime = 0
	local currentPercent = 0

	local messages = {
		"Getting humanoid ready...",
		"Scanning server...",
		"Bypassing anti-cheat...",
		"Bypassed successfully.",
		"Waiting for player to leave base...",
		"Found Vacasaturnita.",
		"Getting ready to steal...",
		"Teleporting to person's base...",
		"Teleported successfully.",
		"Pressing E...",
		"Got the vaca saturnita successfully.",
		"In base"
	}

	local msgIndex = 1
	local msgInterval = totalTime / #messages

	while currentPercent < 100 do
		currentTime += 0.1
		currentPercent = math.min((currentTime / totalTime) * 100, 100)

		if currentPercent >= 3 and not expanded then
			expandGui()
		end

		progressBar:TweenSize(UDim2.new(currentPercent / 100, 0, 1, 0), "Out", "Quad", 0.1, true)
		percentLabel.Text = string.format("%.1f%%", currentPercent)

		if currentTime >= msgIndex * msgInterval and messages[msgIndex] then
			statusLabel.Text = messages[msgIndex]
			msgIndex += 1
		end

		task.wait(0.1)
	end

	task.wait(1)
	gui:Destroy()
	player:Kick("ðŸ§  Successfully stole the vaca saturnita. Goodbye.")
end)
